{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "kubernetes": {
    "fileMatch": [
      "\\.yaml$",
      "kubernetes/.+\\.yaml$"
    ]
  },
  "regexManagers": [
    {
      "fileMatch": ["kubernetes/apps/base/immich/release.yaml"],
      "matchStrings": [
        "tag:\\s*(?<currentValue>v?\\d+\\.\\d+\\.\\d+)"
      ],
      "depNameTemplate": "ghcr.io/immich-app/immich-server",
      "datasourceTemplate": "docker"
    },
     {
      "fileMatch": ["**/plex/**/*.yaml"],
      "matchStrings": [
        "image:\\s*plexinc/pms-docker:(?<currentValue>[^\\s]+)"
      ],
      "depName": "plexinc/pms-docker",
      "datasource": "docker",
      "versioning": "regex:^(?<major>\\d+)\\.(?<minor>\\d+)\\.(?<patch>\\d+)"
    }
  ],
  "packageRules": [
    {
      "matchDatasources": ["docker"],
      "matchPackageNames": ["plexinc/pms-docker"],
      "enabled": true,
      "prCreation": "immediate",
      "commitMessageSuffix": "[plex]"
    }
  ]
}
